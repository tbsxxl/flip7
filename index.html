<!-- index.html -->
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Flip 7 â€“ Score Tracker</title>

  <meta name="theme-color" content="#f6f7f9">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div id="topbar">
    <h1>Flip 7 â€“ Score Tracker</h1>

    <div id="leaderStrip">
      <div id="leaderLeft">
        <div id="leaderLine">
          <div id="leaderDot"></div>
          <div id="leaderTextWrap">
            <span id="leaderCrown">ðŸ‘‘</span>
            <span id="leaderName">Noch keine Spieler</span>
            <span id="leaderScore"></span>
          </div>
        </div>
        <div id="leaderHint">Ã–ffne â‹¯ um Spieler zu verwalten.</div>
        <div id="subLine">
          <span id="roundBadge" class="badge">Runde: 0</span>
          <span id="goalBadge" class="badge">Ziel: 200</span>
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center;">
        <button id="rankBtn" class="iconBtn" type="button" aria-label="Ranking" aria-expanded="false">â‰¡</button>
        <button id="toolsBtn" class="iconBtn" type="button" aria-label="Tools" aria-expanded="false">â‹¯</button>
      </div>
    </div>

    <div id="rankingPanel"></div>
  </div>

  <div id="targetRow">
    <strong>Ziel</strong>
    <input type="number" id="targetPoints" value="200" inputmode="numeric" pattern="[0-9]*" />
  </div>

  <div id="emptyState">Keine Spieler. Ã–ffne â‹¯ â†’ <b>Spieler verwalten</b>.</div>

  <div id="playersContainer"></div>

  <div id="statsWrap">
    <div id="statsHead">
      <strong>Statistik</strong>
      <span id="statsChevron">â–¼</span>
    </div>
    <div id="stats"></div>
  </div>

  <div id="bottomBar">
    <button id="endRoundBtn" type="button">Zwischenrunde beenden</button>
  </div>

  <div id="roundToast">
    <div class="tText">Runde gespeichert</div>
    <button class="tBtn" id="toastUndoBtn" type="button">Undo</button>
  </div>

  <!-- Tools menu -->
  <div id="toolsMenu" role="menu" aria-label="Tools-MenÃ¼">
    <button class="menuItem" id="manageBtn" type="button" role="menuitem">Spieler verwalten</button>
    <div class="menuSep"></div>
    <button class="menuItem" id="colorsBtn" type="button" role="menuitem">Farben neu verteilen</button>
    <div class="menuSep"></div>
    <button class="menuItem" id="undoBtn" type="button" role="menuitem">Undo</button>
    <button class="menuItem" id="undoRoundBtn" type="button" role="menuitem">Undo Runde</button>
    <div class="menuSep"></div>
    <button class="menuItem danger" id="newGameBtn" type="button" role="menuitem">New Game</button>
  </div>

  <!-- Bottom sheet -->
  <div id="sheetOverlay"></div>
  <div id="sheet" aria-hidden="true">
    <div class="sheetHeader" id="sheetHeader">
      <div class="sheetGrabWrap" id="sheetGrabArea" style="position:relative;">
        <div class="grabHit" id="sheetGrabHit"></div>
        <div class="sheetGrab"></div>
      </div>
      <div class="sheetHeadRow">
        <div class="sheetTitle" id="sheetTitle">Spieler</div>
        <button class="sheetClose" id="sheetCloseBtn" type="button" aria-label="SchlieÃŸen">âœ•</button>
      </div>
      <div class="sheetDivider"></div>
    </div>

    <div class="sheetBody" id="sheetBody">
      <div class="sheetSection">
        <h4>Spieler (nur vor Spielstart)</h4>

        <div id="sheetPlayersList"></div>

        <div style="font-weight:var(--wSecondary);color:var(--sub2);font-size:var(--fsSecondary); margin-top:10px;">
          WÃ¤hrend des Spiels ist Spielerverwaltung gesperrt.
        </div>

        <div id="sheetAddSticky">
          <div class="row" id="sheetAddRow" style="margin:0;">
            <input id="sheetAddName" type="text" placeholder="Spielername" autocomplete="off" />
            <button id="sheetAddBtn" type="button">HinzufÃ¼gen</button>
          </div>
        </div>
      </div>

      <div class="sheetSection">
        <h4>Design</h4>
        <div class="toggleRow">
          <div class="tLabel">Compact Mode</div>
          <div id="toggleCompact" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
        </div>
        <div class="toggleRow">
          <div class="tLabel">High Contrast</div>
          <div id="toggleContrast" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
        </div>
      </div>

      <div class="sheetSection">
        <h4>Spiel</h4>
        <button id="sheetNewGameBtn" class="sheetDestructive" type="button">New Game</button>
      </div>

      <div style="height:10px"></div>
    </div>
  </div>

  <!-- Popup -->
  <div class="overlay" id="overlay"></div>
  <div class="popup" id="popup">
    <div class="popupHeader" id="popupHeader">
      <div class="grabBarWrap" id="grabArea" style="position:relative;">
        <div class="grabHit" id="popupGrabHit"></div>
        <div class="grabBar"></div>
      </div>

      <div class="headerRow">
        <h3 id="popupTitle" style="margin:0;font-size:17px;font-weight:var(--wTitle);">Karten</h3>
        <div class="headerRight">
          <span id="popupPlayerBadge" class="badge"></span>
        </div>
      </div>

      <div class="tabs">
        <button id="tabCards" class="tab active" type="button">Karten</button>
        <button id="tabDirect" class="tab" type="button">Direktpunkte</button>
      </div>
    </div>

    <div id="popupCardsView">
      <div class="selectedWrap">
        <div id="selectedChips" class="chips"></div>
        <div id="popupLiveInfo" class="hint">Vorschau: â€“</div>
      </div>

      <div style="font-weight:var(--wTitle);margin:12px 0 8px 0;">Zahlen</div>
      <div id="numberGrid" class="gridNumbers"></div>

      <div style="font-weight:var(--wTitle);margin:12px 0 8px 0;">Modifier</div>
      <div id="modGrid" class="gridMods"></div>
    </div>

    <div id="popupDirectView" style="display:none;">
      <div class="selectedWrap">
        <div class="hint">Direktpunkte Ã¼berschreiben die Karten dieser Runde (kein Bust/Bonus).</div>
      </div>
      <div class="directRow">
        <input id="freeScoreInput" type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Punkte eingeben (z.B. 37)" />
        <button id="applyFreeBtn" type="button">Ãœbernehmen</button>
      </div>
      <div class="lastDirectRow">
        <div id="lastDirectChip" class="lastDirectChip" style="display:none;">Letztes: <span id="lastDirectVal"></span></div>
      </div>
    </div>

    <div class="popupFooter">
      <div class="popupFooterRow">
        <button class="footerIcon" id="popupUndoBtn" type="button" aria-label="Undo letzte Auswahl">â†©ï¸Ž</button>
        <button class="footerGhost" id="clearBtn" type="button">Leeren</button>
        <button class="footerRed" id="cancelBtn" type="button">Abbrechen</button>
        <button class="footerBlue" id="finishBtn" type="button">Fertig</button>
      </div>
    </div>
  </div>

  <!-- Winner -->
  <div id="winnerScreen">
    <div id="winnerCard">
      <h2 id="winnerText" style="margin:0 0 16px 0;font-weight:var(--wTitle);"></h2>
      <button class="iconBtn" id="winnerNewGame" type="button" style="background:#22c55e;color:#fff;width:100%;">Neues Spiel</button>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
